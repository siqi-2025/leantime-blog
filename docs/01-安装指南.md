# Leantime Blog Plugin - å®‰è£…æŒ‡å—

**ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2025-12-13

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#ä¸€ç³»ç»Ÿè¦æ±‚)
2. [å‡†å¤‡å·¥ä½œ](#äºŒå‡†å¤‡å·¥ä½œ)
3. [æ’ä»¶å®‰è£…](#ä¸‰æ’ä»¶å®‰è£…)
4. [é…ç½®æ’ä»¶](#å››é…ç½®æ’ä»¶)
5. [éªŒè¯å®‰è£…](#äº”éªŒè¯å®‰è£…)
6. [è‡ªåŠ¨å‘å¸ƒå·¥å…·å®‰è£…](#å…­è‡ªåŠ¨å‘å¸ƒå·¥å…·å®‰è£…)
7. [æ•…éšœæ’æŸ¥](#ä¸ƒæ•…éšœæ’æŸ¥)

---

## ä¸€ã€ç³»ç»Ÿè¦æ±‚

### 1.1 æœåŠ¡å™¨ç¯å¢ƒ

| ç»„ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|------|---------|---------|
| **PHP** | 8.1 | 8.2+ |
| **MySQL** | 8.0 | 8.0+ |
| **Composer** | 2.0 | æœ€æ–°ç‰ˆ |
| **Leantime** | 3.0 | 3.x æœ€æ–°ç‰ˆ |

### 1.2 PHP æ‰©å±•

ç¡®ä¿ä»¥ä¸‹ PHP æ‰©å±•å·²å¯ç”¨ï¼š

```bash
php -m | grep -E 'pdo|pdo_mysql|mbstring|json|curl|fileinfo|openssl'
```

å¿…éœ€æ‰©å±•ï¼š
- âœ… pdo
- âœ… pdo_mysql
- âœ… mbstring
- âœ… json
- âœ… curl
- âœ… fileinfo
- âœ… openssl

### 1.3 Leantime å®‰è£…

**ç¡®è®¤ Leantime å·²å®‰è£…å¹¶æ­£å¸¸è¿è¡Œ**ï¼š

```bash
# æ£€æŸ¥ Leantime ç‰ˆæœ¬
curl -I http://your-leantime-url

# åº”è¿”å› HTTP/1.1 200 OK æˆ– HTTP/1.1 303 See Other
```

**Leantime è®¿é—®ä¿¡æ¯**ï¼š
- URL: http://your-leantime-url
- ç®¡ç†å‘˜è´¦æˆ·: admin@example.com
- ç®¡ç†å‘˜å¯†ç : your_password

---

## äºŒã€å‡†å¤‡å·¥ä½œ

### 2.1 åˆ›å»º API Key

1. ç™»å½• Leantime ç®¡ç†åå°
   ```
   http://your-leantime-url
   è´¦æˆ·: admin@example.com
   å¯†ç : your_password
   ```

2. è¿›å…¥ **Company Settings** â†’ **API Keys**

3. ç‚¹å‡» **Create New API Key**

4. è¾“å…¥åç§°: `Blog Plugin API Key`

5. ä¿å­˜å¹¶è®°å½• API Keyï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰ï¼š
   ```
   your_api_key_here
   ```

âš ï¸ **é‡è¦**: API Key åªåœ¨åˆ›å»ºæ—¶æ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼

### 2.2 å¤‡ä»½æ•°æ®åº“

å®‰è£…æ’ä»¶å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½æ•°æ®åº“ï¼š

```bash
# å¤‡ä»½ Leantime æ•°æ®åº“
mysqldump -h localhost -P 6105 -u leantime -p leantime > leantime_backup_$(date +%Y%m%d).sql

# è¾“å…¥å¯†ç : your_db_password
```

### 2.3 æ£€æŸ¥ç›®å½•æƒé™

```bash
# ç¡®ä¿ Leantime æ’ä»¶ç›®å½•å¯å†™
ls -la /path/to/leantime/app/Plugins

# å¦‚æœæƒé™ä¸è¶³ï¼Œä¿®æ”¹æƒé™
sudo chown -R www-data:www-data /path/to/leantime/app/Plugins
sudo chmod -R 755 /path/to/leantime/app/Plugins
```

---

## ä¸‰ã€æ’ä»¶å®‰è£…

### 3.1 æ–¹æ³•ä¸€: Git å…‹éš†ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥ Leantime æ’ä»¶ç›®å½•
cd D:\github\leantime\app\Plugins

# 2. å…‹éš†åšå®¢æ’ä»¶
git clone https://github.com/your-repo/leantime-blog.git LeantimeBlog

# 3. è¿›å…¥æ’ä»¶ç›®å½•
cd LeantimeBlog

# 4. å®‰è£… Composer ä¾èµ–
composer install --no-dev --optimize-autoloader

# 5. æ£€æŸ¥æ’ä»¶ç»“æ„
ls -la
```

### 3.2 æ–¹æ³•äºŒ: æ‰‹åŠ¨ä¸‹è½½

```bash
# 1. ä¸‹è½½æ’ä»¶å‹ç¼©åŒ…
wget https://github.com/your-repo/leantime-blog/archive/refs/heads/main.zip

# 2. è§£å‹åˆ°æ’ä»¶ç›®å½•
unzip main.zip -d D:\github\leantime\app\Plugins

# 3. é‡å‘½åç›®å½•
mv D:\github\leantime\app\Plugins\leantime-blog-main D:\github\leantime\app\Plugins\LeantimeBlog

# 4. å®‰è£…ä¾èµ–
cd D:\github\leantime\app\Plugins\LeantimeBlog
composer install --no-dev
```

### 3.3 æ–¹æ³•ä¸‰: å¤åˆ¶æœ¬åœ°æ–‡ä»¶

å¦‚æœæ‚¨å·²ç»æœ‰æ’ä»¶ä»£ç ï¼š

```bash
# ä» leantime-blog é¡¹ç›®å¤åˆ¶æ’ä»¶ä»£ç 
cp -r D:\github\leantime\leantime-blog\plugin\LeantimeBlog D:\github\leantime\app\Plugins\

# å®‰è£…ä¾èµ–
cd D:\github\leantime\app\Plugins\LeantimeBlog
composer install --no-dev
```

---

## å››ã€é…ç½®æ’ä»¶

### 4.1 è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# 1. è¿›å…¥ Leantime æ ¹ç›®å½•
cd D:\github\leantime

# 2. è¿è¡Œè¿ç§»åˆ›å»ºæ•°æ®è¡¨
php artisan migrate --path=app/Plugins/LeantimeBlog/Migrations

# 3. éªŒè¯æ•°æ®è¡¨å·²åˆ›å»º
docker exec -it leantime-mysql-prod mysql -uleantime -p -e "SHOW TABLES LIKE 'zp_blog%'"
# è¾“å…¥å¯†ç : your_db_password
```

**é¢„æœŸè¾“å‡º**ï¼š
```
+---------------------------+
| Tables_in_leantime        |
+---------------------------+
| zp_blog_categories        |
| zp_blog_comments          |
| zp_blog_post_tags         |
| zp_blog_posts             |
| zp_blog_tags              |
+---------------------------+
```

### 4.2 åˆ›å»ºé»˜è®¤åˆ†ç±»

```bash
# è¿è¡Œç§å­æ•°æ®ï¼ˆå¯é€‰ï¼‰
php artisan db:seed --class=BlogCategorySeeder
```

æˆ–è€…æ‰‹åŠ¨æ’å…¥ï¼š

```sql
-- è¿æ¥åˆ°æ•°æ®åº“
docker exec -it leantime-mysql-prod mysql -uleantime -p leantime

-- æ’å…¥é»˜è®¤åˆ†ç±»
INSERT INTO zp_blog_categories (name, slug, description, sort_order) VALUES
('æŠ€æœ¯', 'tech', 'æŠ€æœ¯ç±»æ–‡ç« ', 1),
('æ•™ç¨‹', 'tutorial', 'æ•™ç¨‹ç±»æ–‡ç« ', 2),
('é¡¹ç›®æ—¥å¿—', 'project-log', 'é¡¹ç›®å¼€å‘æ—¥å¿—', 3);

-- æ’å…¥é»˜è®¤æ ‡ç­¾
INSERT INTO zp_blog_tags (name, slug, color) VALUES
('PHP', 'php', '#4F5D95'),
('Laravel', 'laravel', '#FF2D20'),
('Leantime', 'leantime', '#006C9E'),
('æ•™ç¨‹', 'tutorial', '#10B981');
```

### 4.3 å¯ç”¨æ’ä»¶

#### æ–¹æ³•ä¸€: é€šè¿‡ Web ç•Œé¢ï¼ˆæ¨èï¼‰

1. ç™»å½• Leantime ç®¡ç†åå°
2. è¿›å…¥ **Company Settings** â†’ **Plugins**
3. æ‰¾åˆ° **LeantimeBlog** æ’ä»¶
4. ç‚¹å‡» **Enable** æŒ‰é’®
5. åˆ·æ–°é¡µé¢ï¼Œåº”è¯¥çœ‹åˆ°é¡¶éƒ¨èœå•å‡ºç° **Blog** é€‰é¡¹

#### æ–¹æ³•äºŒ: é€šè¿‡é…ç½®æ–‡ä»¶

ç¼–è¾‘ Leantime é…ç½®æ–‡ä»¶ï¼š

```bash
# ç¼–è¾‘é…ç½®
nano D:\github\leantime\.env

# æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹è¡Œ
PLUGINS_ENABLED=LeantimeBlog

# é‡å¯ Leantime å®¹å™¨
docker-compose -f D:\github\leantime\docker\docker-compose.yml restart leantime
```

### 4.4 é…ç½®æ’ä»¶è®¾ç½®

åˆ›å»ºæ’ä»¶é…ç½®æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp D:\github\leantime\app\Plugins\LeantimeBlog\config\config.example.php \
   D:\github\leantime\app\Plugins\LeantimeBlog\config\config.php

# ç¼–è¾‘é…ç½®
nano D:\github\leantime\app\Plugins\LeantimeBlog\config\config.php
```

**é…ç½®ç¤ºä¾‹**ï¼š

```php
<?php
return [
    'api' => [
        'rate_limit' => 100,  // æ¯å°æ—¶ API è¯·æ±‚é™åˆ¶
        'rate_limit_window' => 3600,
    ],
    'markdown' => [
        'enable_table' => true,
        'enable_strikethrough' => true,
        'code_highlighting' => 'prism',
    ],
    'posts' => [
        'per_page' => 20,
        'excerpt_length' => 200,
    ],
];
```

---

## äº”ã€éªŒè¯å®‰è£…

### 5.1 æ£€æŸ¥æ’ä»¶çŠ¶æ€

```bash
# æ£€æŸ¥æ’ä»¶æ–‡ä»¶å­˜åœ¨
ls -la D:\github\leantime\app\Plugins\LeantimeBlog

# æ£€æŸ¥æ•°æ®è¡¨
docker exec -it leantime-mysql-prod mysql -uleantime -p -e "SELECT COUNT(*) FROM leantime.zp_blog_posts"
```

### 5.2 è®¿é—®åšå®¢ç•Œé¢

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://your-leantime-url
2. ç™»å½•ï¼ˆadmin@example.com / your_passwordï¼‰
3. ç‚¹å‡»é¡¶éƒ¨èœå•çš„ **Blog**
4. åº”è¯¥çœ‹åˆ°åšå®¢ç®¡ç†ç•Œé¢

### 5.3 æµ‹è¯• API æ¥å£

```bash
# æµ‹è¯•åˆ—å‡ºæ–‡ç« 
curl -X POST http://your-leantime-url/api/jsonrpc \
  -H "x-api-key: your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "leantime.rpc.blog.listPosts",
    "params": {"status": "published", "limit": 10},
    "id": "test-001"
  }'
```

**é¢„æœŸå“åº”**ï¼š

```json
{
  "jsonrpc": "2.0",
  "result": {
    "posts": [],
    "pagination": {
      "total": 0,
      "page": 1,
      "per_page": 10,
      "total_pages": 0
    }
  },
  "id": "test-001"
}
```

### 5.4 åˆ›å»ºæµ‹è¯•æ–‡ç« 

```bash
# é€šè¿‡ API åˆ›å»ºæµ‹è¯•æ–‡ç« 
curl -X POST http://your-leantime-url/api/jsonrpc \
  -H "x-api-key: your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "leantime.rpc.blog.publishPost",
    "params": {
      "title": "æµ‹è¯•æ–‡ç« ",
      "content": "# Hello Leantime Blog\n\nè¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œä½¿ç”¨ **Markdown** æ ¼å¼ã€‚\n\n```php\necho \"Hello World\";\n```",
      "status": "published",
      "excerpt": "è¿™æ˜¯æµ‹è¯•æ–‡ç« æ‘˜è¦"
    },
    "id": "test-002"
  }'
```

**é¢„æœŸå“åº”**ï¼š

```json
{
  "jsonrpc": "2.0",
  "result": {
    "success": true,
    "post_id": 1,
    "slug": "ce-shi-wen-zhang",
    "url": "http://your-leantime-url/blog/view/1",
    "published_at": "2025-12-13 15:30:00"
  },
  "id": "test-002"
}
```

### 5.5 éªŒè¯æ–‡ç« æ˜¾ç¤º

è®¿é—®æ–‡ç«  URLï¼šhttp://your-leantime-url/blog/view/1

åº”è¯¥çœ‹åˆ°ï¼š
- âœ… æ–‡ç« æ ‡é¢˜
- âœ… Markdown æ¸²æŸ“çš„å†…å®¹
- âœ… ä»£ç é«˜äº®
- âœ… å‘å¸ƒæ—¶é—´
- âœ… ä½œè€…ä¿¡æ¯

---

## å…­ã€è‡ªåŠ¨å‘å¸ƒå·¥å…·å®‰è£…

### 6.1 PowerShell ç‰ˆæœ¬ï¼ˆWindowsï¼‰

```powershell
# 1. å¤åˆ¶è„šæœ¬åˆ°å·¥å…·ç›®å½•
Copy-Item -Path "D:\github\leantime\leantime-blog\tools\powershell\leantime-publisher.ps1" `
          -Destination "D:\Tools\leantime-publisher.ps1"

# 2. åˆå§‹åŒ–é…ç½®
cd D:\Tools
.\leantime-publisher.ps1

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ API Key
notepad $env:USERPROFILE\.leantime-publisher\config.json
```

**é…ç½®æ–‡ä»¶å†…å®¹**ï¼š

```json
{
  "leantime": {
    "url": "http://your-leantime-url",
    "api_key": "your_api_key_here",
    "default_project_id": null,
    "default_status": "published"
  },
  "monitor": {
    "directories": [
      {
        "path": "D:\\Blog\\Posts",
        "enabled": true,
        "project_id": null,
        "recursive": true,
        "filters": {
          "include": ["**/*.md", "**/*.markdown"],
          "exclude": ["**/draft/**", "**/ignore/**", "**/_*.md"]
        }
      }
    ],
    "debounce_delay": 3000
  }
}
```

```powershell
# 4. åˆ›å»ºç›‘æ§ç›®å½•
mkdir D:\Blog\Posts

# 5. æµ‹è¯•è¿è¡Œ
.\leantime-publisher.ps1

# 6. å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼ˆå¯é€‰ï¼‰
.\leantime-publisher.ps1 -Install

# 7. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
.\leantime-publisher.ps1 -Status
```

### 6.2 Python ç‰ˆæœ¬ï¼ˆè·¨å¹³å°ï¼‰

```bash
# 1. è¿›å…¥ Python å·¥å…·ç›®å½•
cd D:\github\leantime\leantime-blog\tools\python

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. è¿è¡Œ GUI é…ç½®å·¥å…·
python config_gui.py
```

**åœ¨ GUI ä¸­é…ç½®**ï¼š
1. å¡«å…¥ Leantime URL: http://your-leantime-url
2. å¡«å…¥ API Key: your_api_key_here
3. æ·»åŠ ç›‘æ§ç›®å½•: D:\Blog\Posts
4. ä¿å­˜é…ç½®

```bash
# 4. å¯åŠ¨ç›‘æ§
python leantime_publisher.py
```

### 6.3 æµ‹è¯•è‡ªåŠ¨å‘å¸ƒ

```bash
# 1. åˆ›å»ºæµ‹è¯• Markdown æ–‡ä»¶
cat > D:\Blog\Posts\test-auto-publish.md << 'EOF'
---
title: è‡ªåŠ¨å‘å¸ƒæµ‹è¯•
category: æŠ€æœ¯
tags: [æµ‹è¯•, è‡ªåŠ¨åŒ–]
status: published
---

# è‡ªåŠ¨å‘å¸ƒæµ‹è¯•

è¿™æ˜¯ä¸€ç¯‡é€šè¿‡æœ¬åœ°æ–‡ä»¶ç›‘æ§è‡ªåŠ¨å‘å¸ƒçš„æ–‡ç« ã€‚

ä¿å­˜æ­¤æ–‡ä»¶åï¼Œåº”è¯¥ä¼šè‡ªåŠ¨å‘å¸ƒåˆ° Leantime Blogã€‚

## æµ‹è¯•ä»£ç 

```python
def hello():
    print("Hello Leantime!")
```
EOF

# 2. æŸ¥çœ‹è‡ªåŠ¨å‘å¸ƒå·¥å…·æ—¥å¿—
tail -f $env:USERPROFILE\.leantime-publisher\leantime-publisher.log
```

**é¢„æœŸè¾“å‡º**ï¼š

```
[2025-12-13 15:35:00] [INFO] ğŸ‘€ å¼€å§‹ç›‘æ§ç›®å½•: D:\Blog\Posts
[2025-12-13 15:35:10] [INFO] ğŸ“ æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´: D:\Blog\Posts\test-auto-publish.md [Created]
[2025-12-13 15:35:10] [INFO] ğŸ“„ å‡†å¤‡å‘å¸ƒæ–‡ä»¶: D:\Blog\Posts\test-auto-publish.md
[2025-12-13 15:35:10] [INFO] ğŸš€ å‘é€è¯·æ±‚åˆ° Leantime...
[2025-12-13 15:35:11] [SUCCESS] âœ… æ–‡ç« å‘å¸ƒæˆåŠŸ!
[2025-12-13 15:35:11] [SUCCESS]    æ–‡ç«  ID: 2
[2025-12-13 15:35:11] [SUCCESS]    è®¿é—®é“¾æ¥: http://your-leantime-url/blog/view/2
```

---

## ä¸ƒã€æ•…éšœæ’æŸ¥

### 7.1 æ’ä»¶æ— æ³•å¯ç”¨

**é—®é¢˜**: åœ¨ Company Settings â†’ Plugins ä¸­æ‰¾ä¸åˆ°æ’ä»¶

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥æ’ä»¶ç›®å½•æ˜¯å¦æ­£ç¡®
ls -la D:\github\leantime\app\Plugins\LeantimeBlog

# 2. æ£€æŸ¥ register.php æ˜¯å¦å­˜åœ¨
cat D:\github\leantime\app\Plugins\LeantimeBlog\register.php

# 3. æ¸…é™¤ç¼“å­˜
cd D:\github\leantime
php artisan cache:clear
php artisan config:clear

# 4. é‡å¯ Leantime å®¹å™¨
docker-compose -f docker\docker-compose.yml restart leantime
```

### 7.2 æ•°æ®åº“è¿ç§»å¤±è´¥

**é—®é¢˜**: `php artisan migrate` æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥æ•°æ®åº“è¿æ¥
docker exec -it leantime-mysql-prod mysql -uleantime -p -e "SELECT 1"

# 2. æ£€æŸ¥è¿ç§»æ–‡ä»¶
ls -la D:\github\leantime\app\Plugins\LeantimeBlog\Migrations

# 3. æ‰‹åŠ¨è¿è¡Œ SQL
docker exec -it leantime-mysql-prod mysql -uleantime -p leantime < \
  D:\github\leantime\app\Plugins\LeantimeBlog\Migrations\001_create_blog_posts_table.sql

# 4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker logs leantime-web-prod --tail=100
```

### 7.3 API è°ƒç”¨è¿”å› 401

**é—®é¢˜**: API è¯·æ±‚è¿”å› "Unauthorized"

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
# ç™»å½• Leantime â†’ Company Settings â†’ API Keys

# 2. æµ‹è¯• API Key
curl -X POST http://your-leantime-url/api/jsonrpc \
  -H "x-api-key: your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"leantime.rpc.blog.listPosts","params":{},"id":"1"}'

# 3. å¦‚æœä»ç„¶å¤±è´¥ï¼Œé‡æ–°åˆ›å»º API Key
```

### 7.4 Markdown æ¸²æŸ“å¼‚å¸¸

**é—®é¢˜**: Markdown å†…å®¹æ˜¾ç¤ºä¸ºçº¯æ–‡æœ¬

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥ Composer ä¾èµ–æ˜¯å¦å®‰è£…
cd D:\github\leantime\app\Plugins\LeantimeBlog
composer show | grep commonmark

# 2. é‡æ–°å®‰è£…ä¾èµ–
composer install --no-dev

# 3. æ¸…é™¤ç¼“å­˜
cd D:\github\leantime
php artisan view:clear
```

### 7.5 æ–‡ä»¶ç›‘æ§ä¸å·¥ä½œ

**é—®é¢˜**: ä¿å­˜ Markdown æ–‡ä»¶åæ²¡æœ‰è‡ªåŠ¨å‘å¸ƒ

**è§£å†³æ–¹æ¡ˆ**ï¼š

```powershell
# 1. æ£€æŸ¥ç›‘æ§å·¥å…·æ˜¯å¦è¿è¡Œ
Get-Process | Where-Object { $_.ProcessName -like "*powershell*" }

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
Get-Content "$env:USERPROFILE\.leantime-publisher\config.json"

# 3. æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
Test-Path "D:\Blog\Posts"

# 4. æŸ¥çœ‹æ—¥å¿—
Get-Content "$env:USERPROFILE\.leantime-publisher\leantime-publisher.log" -Tail 50

# 5. æ‰‹åŠ¨æµ‹è¯•å‘å¸ƒ
.\leantime-publisher.ps1 -TestFile "D:\Blog\Posts\test.md"
```

---

## å…«ã€å¸è½½æ’ä»¶

å¦‚æœéœ€è¦å¸è½½æ’ä»¶ï¼š

```bash
# 1. ç¦ç”¨æ’ä»¶
# ç™»å½• Leantime â†’ Company Settings â†’ Plugins â†’ Disable LeantimeBlog

# 2. åˆ é™¤æ•°æ®è¡¨ï¼ˆå¯é€‰ï¼Œä¼šä¸¢å¤±æ‰€æœ‰åšå®¢æ•°æ®ï¼‰
docker exec -it leantime-mysql-prod mysql -uleantime -p -e "
  DROP TABLE IF EXISTS leantime.zp_blog_comments;
  DROP TABLE IF EXISTS leantime.zp_blog_post_tags;
  DROP TABLE IF EXISTS leantime.zp_blog_tags;
  DROP TABLE IF EXISTS leantime.zp_blog_posts;
  DROP TABLE IF EXISTS leantime.zp_blog_categories;
"

# 3. åˆ é™¤æ’ä»¶æ–‡ä»¶
rm -rf D:\github\leantime\app\Plugins\LeantimeBlog

# 4. æ¸…é™¤ç¼“å­˜
cd D:\github\leantime
php artisan cache:clear
php artisan config:clear
```

---

## ä¹ã€å‡çº§æ’ä»¶

```bash
# 1. å¤‡ä»½æ•°æ®åº“
mysqldump -h localhost -P 6105 -u leantime -p leantime > backup_before_upgrade.sql

# 2. è¿›å…¥æ’ä»¶ç›®å½•
cd D:\github\leantime\app\Plugins\LeantimeBlog

# 3. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 4. æ›´æ–°ä¾èµ–
composer install --no-dev --optimize-autoloader

# 5. è¿è¡Œæ–°çš„è¿ç§»
cd D:\github\leantime
php artisan migrate --path=app/Plugins/LeantimeBlog/Migrations

# 6. æ¸…é™¤ç¼“å­˜
php artisan cache:clear
php artisan config:clear

# 7. é‡å¯å®¹å™¨
docker-compose -f docker\docker-compose.yml restart leantime
```

---

## åã€ä¸‹ä¸€æ­¥

å®‰è£…å®Œæˆåï¼Œè¯·é˜…è¯»ï¼š

- [ç”¨æˆ·æ‰‹å†Œ](04-ç”¨æˆ·æ‰‹å†Œ.md) - äº†è§£å¦‚ä½•ä½¿ç”¨åšå®¢åŠŸèƒ½
- [API æ–‡æ¡£](APIæ–‡æ¡£.md) - äº†è§£ API æ¥å£è¯¦æƒ…
- [ç»´æŠ¤æ‰‹å†Œ](03-ç»´æŠ¤æ‰‹å†Œ.md) - äº†è§£æ—¥å¸¸ç»´æŠ¤æ“ä½œ

---

**å®‰è£…å®Œæˆï¼äº«å— Leantime Blog å§ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [æ•…éšœæ’æŸ¥](#ä¸ƒæ•…éšœæ’æŸ¥) æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2025-12-13
